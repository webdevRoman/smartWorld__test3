(function(t){function s(s){for(var i,o,r=s[0],c=s[1],u=s[2],p=0,d=[];p<r.length;p++)o=r[p],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&d.push(n[o][0]),n[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);l&&l(s);while(d.length)d.shift()();return a.push.apply(a,u||[]),e()}function e(){for(var t,s=0;s<a.length;s++){for(var e=a[s],i=!0,r=1;r<e.length;r++){var c=e[r];0!==n[c]&&(i=!1)}i&&(a.splice(s--,1),t=o(o.s=e[0]))}return t}var i={},n={app:0},a=[];function o(s){if(i[s])return i[s].exports;var e=i[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=i,o.d=function(t,s,e){o.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:e})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,s){if(1&s&&(t=o(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var i in t)o.d(e,i,function(s){return t[s]}.bind(null,i));return e},o.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(s,"a",s),s},o.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},o.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=s,r=r.slice();for(var u=0;u<r.length;u++)s(r[u]);var l=c;a.push([0,"chunk-vendors"]),e()})({0:function(t,s,e){t.exports=e("56d7")},"0f62":function(t,s,e){t.exports=e.p+"img/user.7ce18556.svg"},"2b22":function(t,s,e){},"3c1a":function(t,s,e){t.exports=e.p+"img/lock.9c6162b8.svg"},"56d7":function(t,s,e){"use strict";e.r(s);e("e260"),e("e6cf"),e("cca6"),e("a79d");var i=e("2b0e"),n=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"app"}},[t.isUserAuthenticated?t.loadingData?e("div",{staticClass:"loading"},[e("div",[e("div",{staticClass:"loading-img"},[e("svg",{attrs:{width:"526",height:"526",viewBox:"0 0 526 526",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[e("path",{attrs:{d:"M263 513C401.071 513 513 401.071 513 263C513 124.929 401.071 13 263 13C124.929 13 13 124.929 13 263",stroke:"#3C6D85","stroke-width":"25","stroke-linecap":"round"}})])]),e("div",{staticClass:"loading-text"},[t._v(" Загружаем данные... ")])])]):e("div",{staticClass:"app"},[e("Header"),e("Lists")],1):e("Login")],1)},a=[],o=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("header",{staticClass:"header"},[e("div",{staticClass:"header-right"},[e("router-link",{staticClass:"header-logo",attrs:{to:"/",tag:"div"}},[t._v("ToDo List")]),e("div",{staticClass:"header-username"},[t._v(t._s(t.login))])],1),e("button",{staticClass:"btn header-btn",attrs:{disabled:t.processing},on:{click:function(s){s.preventDefault(),t.signoutConfirm=!0}}},[t._v("Выйти")])]),t.signoutConfirm?e("div",{staticClass:"overlay"},[e("div",{staticClass:"popup popup-signout"},[e("div",{staticClass:"popup-close",on:{click:function(s){s.preventDefault(),t.signoutConfirm=!1}}},[t._v("×")]),e("div",{staticClass:"popup-title"},[t._v("Вы действительно хотите выйти?")]),e("div",[e("button",{staticClass:"btn popup-signout__btn",on:{click:function(s){return s.preventDefault(),t.signout(s)}}},[t._v("Да")]),e("button",{staticClass:"btn popup-signout__btn",on:{click:function(s){s.preventDefault(),t.signoutConfirm=!1}}},[t._v("Нет")])])])]):t._e()])},r=[],c={data:function(){return{signoutConfirm:!1}},methods:{signout:function(){this.$store.dispatch("SIGNOUT")}},computed:{login:function(){return this.$store.getters.userLogin},processing:function(){return this.$store.getters.getProcessing}}},u=c,l=(e("bb60"),e("2877")),p=Object(l["a"])(u,o,r,!1,null,"9bfc3504",null),d=p.exports,f=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"overlay"},[e("form",{staticClass:"login",attrs:{action:"#"}},[e("h2",{staticClass:"login-title"},[t._v("Авторизация")]),t.error?e("div",{staticClass:"login-warning"},[t._v(t._s(t.error))]):t._e(),e("div",{staticClass:"login-block"},[t._m(0),e("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"login-block__input",attrs:{type:"email",placeholder:"Email",required:""},domProps:{value:t.email},on:{input:function(s){s.target.composing||(t.email=s.target.value)}}})]),e("div",{staticClass:"login-block"},[t._m(1),e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"login-block__input",attrs:{type:"password",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(s){s.target.composing||(t.password=s.target.value)}}})]),e("button",{staticClass:"btn login-btn",attrs:{type:"submit",disabled:t.processing},on:{click:function(s){return s.preventDefault(),t.signin(s)}}},[t._v("Войти")])]),t.errorPopup?e("div",{staticClass:"overlay"},[e("div",{staticClass:"popup popup-error"},[e("div",{staticClass:"popup-close",on:{click:function(s){s.preventDefault(),t.errorPopup=!1}}},[t._v("×")]),e("div",{staticClass:"popup-title"},[e("div",{staticClass:"popup-error__cross"},[t._v("×")]),e("div",{staticClass:"popup-error__message"},[t._v(t._s(t.errorMessage))])])])]):t._e()])},h=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"login-block__icon"},[i("img",{attrs:{src:e("0f62"),alt:"User image"}})])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"login-block__icon"},[i("img",{attrs:{src:e("3c1a"),alt:"Lock image"}})])}],v={data:function(){return{email:null,password:null,errorPopup:!1,errorMessage:null}},methods:{signin:function(){this.email?this.password?this.$store.dispatch("SIGNIN",{email:this.email,password:this.password}):(this.errorMessage="Введите пароль",this.errorPopup=!0):(this.errorMessage="Введите e-mail",this.errorPopup=!0)}},computed:{error:function(){return this.$store.getters.getError},processing:function(){return this.$store.getters.getProcessing}}},_=v,g=(e("fb26"),Object(l["a"])(_,f,h,!1,null,"1366eb20",null)),m=g.exports,S=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"container"},[i("div",{staticClass:"left"},[i("div",{staticClass:"left-filter"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.status,expression:"status"}],staticClass:"left-filter__select",attrs:{name:"filter",id:"filter"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.status=s.target.multiple?e:e[0]}}},[i("option",{attrs:{value:"process",selected:""}},[t._v("Неисполненные")]),i("option",{attrs:{value:"done"}},[t._v("Исполненные")]),i("option",{attrs:{value:"all"}},[t._v("Все")])])]),i("div",{staticClass:"left-lists"},t._l(t.filteredLists,(function(s,n){return i("div",{key:s.id,class:t.listClass(s),on:{click:function(e){return e.preventDefault(),t.setActiveCard(s,n)}}},[i("div",{staticClass:"left-list__name"},[t._v(t._s(s.name))]),i("div",{staticClass:"left-list__buttons"},[i("button",{staticClass:"btn left-list__btn",on:{click:function(e){return e.preventDefault(),t.showListPopup(s.name,s.id)}}},[i("img",{attrs:{src:e("c4cc"),alt:"Pen image"}})]),i("button",{staticClass:"btn left-list__btn",on:{click:function(e){return e.preventDefault(),t.showDeleteListPopup(s)}}},[i("img",{attrs:{src:e("e1dc"),alt:"Bin image"}})])])])})),0),i("button",{staticClass:"btn left-btn",on:{click:function(s){return s.preventDefault(),t.showListPopup(null,null)}}},[t._v("+")])]),i("div",{staticClass:"separator"}),t.currentList?i("div",{staticClass:"right"},[i("Tasks",{attrs:{list:t.currentList}})],1):i("div",{staticClass:"right-choose"},[t._v(" Выберите список дел ")]),t.listPopup?i("div",{staticClass:"overlay"},[i("div",{staticClass:"popup popup-add_list"},[i("div",{staticClass:"popup-close",on:{click:function(s){s.preventDefault(),t.listPopup=!1}}},[t._v("×")]),t.addPopupFlag?i("div",{staticClass:"popup-title"},[t._v("Добавить список дел")]):i("div",{staticClass:"popup-title"},[t._v("Изменить список дел")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.newListName,expression:"newListName"}],staticClass:"popup-input",attrs:{type:"text",placeholder:"Название списка дел"},domProps:{value:t.newListName},on:{input:function(s){s.target.composing||(t.newListName=s.target.value)}}}),t.addPopupFlag?i("button",{staticClass:"btn popup-btn",on:{click:function(s){return s.preventDefault(),t.addList(s)}}},[t._v("Добавить")]):i("button",{staticClass:"btn popup-btn",on:{click:function(s){return s.preventDefault(),t.editList(s)}}},[t._v("Сохранить изменения")])])]):t._e(),t.deleteListPopup?i("div",{staticClass:"overlay"},[i("div",{staticClass:"popup popup-delete"},[i("div",{staticClass:"popup-close",on:{click:function(s){s.preventDefault(),t.deleteListPopup=!1}}},[t._v("×")]),i("div",{staticClass:"popup-title"},[t._v(' Вы действительно хотите удалить список дел "'+t._s(t.currentList.name)+'"? '+t._s(t.currentList.tasks.length?"\n\nВсе связанные дела ("+t.currentList.tasks.length+" шт.) также будут удалены:":"")+" "),i("ul",t._l(t.currentList.tasks,(function(s,e){return i("li",{key:e},[t._v(t._s(s.name))])})),0)]),i("div",[i("button",{staticClass:"btn popup-delete__btn",on:{click:function(s){return s.preventDefault(),t.deleteList()}}},[t._v("Да")]),i("button",{staticClass:"btn popup-delete__btn",on:{click:function(s){s.preventDefault(),t.deleteListPopup=!1}}},[t._v("Нет")])])])]):t._e(),t.errorPopup?i("div",{staticClass:"overlay"},[i("div",{staticClass:"popup popup-error"},[i("div",{staticClass:"popup-close",on:{click:function(s){s.preventDefault(),t.errorPopup=!1}}},[t._v("×")]),i("div",{staticClass:"popup-title"},[i("div",{staticClass:"popup-error__cross"},[t._v("×")]),i("div",{staticClass:"popup-error__message"},[t._v(t._s(t.errorMessage))])])])]):t._e(),t.successPopup?i("div",{staticClass:"popup popup-success"},[i("div",{staticClass:"popup-close",on:{click:function(s){s.preventDefault(),t.successPopup=!1}}},[t._v("×")]),i("div",{staticClass:"popup-title"},[i("div",{staticClass:"popup-success__tick"},[i("svg",{staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve",fill:"#2E7D32"}},[i("path",{attrs:{d:"M504.502,75.496c-9.997-9.998-26.205-9.998-36.204,0L161.594,382.203L43.702,264.311c-9.997-9.998-26.205-9.997-36.204,0 c-9.998,9.997-9.998,26.205,0,36.203l135.994,135.992c9.994,9.997,26.214,9.99,36.204,0L504.502,111.7 C514.5,101.703,514.499,85.494,504.502,75.496z"}})])]),i("div",{staticClass:"popup-success__message"},[t._v(t._s(t.successMessage))])])]):t._e()])},k=[],T=(e("a623"),e("4160"),e("b0c0"),e("159b"),function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("section",{staticClass:"list"},[i("h2",{staticClass:"list-title"},[t._v(t._s(t.list.name))]),t.list.tasks.length>0?i("div",{staticClass:"list-items"},t._l(t.sortedTasks,(function(s,n){return i("div",{key:s.id,staticClass:"list-item"},[s.priority?i("div",{staticClass:"list-item__priority"}):t._e(),i("div",{staticClass:"list-item__block"},[i("input",{directives:[{name:"model",rawName:"v-model",value:s.done,expression:"task.done"}],staticClass:"list-item__checkbox",attrs:{type:"checkbox",name:"done",id:t.generateCheckboxId(n)},domProps:{checked:Array.isArray(s.done)?t._i(s.done,null)>-1:s.done},on:{click:function(e){return e.preventDefault(),t.changeTaskDone(s.id,e)},change:function(e){var i=s.done,n=e.target,a=!!n.checked;if(Array.isArray(i)){var o=null,r=t._i(i,o);n.checked?r<0&&t.$set(s,"done",i.concat([o])):r>-1&&t.$set(s,"done",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(s,"done",a)}}}),i("label",{staticClass:"list-item__name",attrs:{for:t.generateCheckboxId(n)}},[t._v(t._s(s.name))])]),i("div",{staticClass:"list-item__block"},[i("div",{staticClass:"list-item__date"},[t._v(t._s(t.getTime(s.time)))]),i("button",{staticClass:"btn list-item__btn",on:{click:function(e){return e.preventDefault(),t.showTaskPopup(s.id,s.name,s.priority)}}},[i("img",{attrs:{src:e("c4cc"),alt:"Pen image"}})]),i("button",{staticClass:"btn list-item__btn",on:{click:function(e){return e.preventDefault(),t.showDeleteTaskPopup(s)}}},[i("img",{attrs:{src:e("e1dc"),alt:"Bin image"}})])])])})),0):i("div",{staticClass:"list-noitems"},[t._v("В этом списке ещё нет задач")]),i("button",{staticClass:"btn list-btn",on:{click:function(s){return s.preventDefault(),t.showTaskPopup(null,null,null)}}},[t._v("+")]),t.taskPopup?i("div",{staticClass:"overlay"},[i("div",{staticClass:"popup popup-add_task"},[i("div",{staticClass:"popup-close",on:{click:function(s){s.preventDefault(),t.taskPopup=!1}}},[t._v("×")]),t.addPopupFlag?i("div",{staticClass:"popup-title"},[t._v("Добавить дело")]):i("div",{staticClass:"popup-title"},[t._v("Изменить дело")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.newTaskName,expression:"newTaskName"}],staticClass:"popup-input",attrs:{type:"text",placeholder:"Название дела"},domProps:{value:t.newTaskName},on:{input:function(s){s.target.composing||(t.newTaskName=s.target.value)}}}),i("div",{staticClass:"popup-priority"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.newTaskPriority,expression:"newTaskPriority"}],staticClass:"list-item__checkbox",attrs:{type:"checkbox",name:"priority",id:"priority-checkbox"},domProps:{checked:Array.isArray(t.newTaskPriority)?t._i(t.newTaskPriority,null)>-1:t.newTaskPriority},on:{change:function(s){var e=t.newTaskPriority,i=s.target,n=!!i.checked;if(Array.isArray(e)){var a=null,o=t._i(e,a);i.checked?o<0&&(t.newTaskPriority=e.concat([a])):o>-1&&(t.newTaskPriority=e.slice(0,o).concat(e.slice(o+1)))}else t.newTaskPriority=n}}}),i("label",{staticClass:"popup-priority__label",attrs:{for:"priority-checkbox"}},[t._v("Срочно")])]),t.addPopupFlag?i("button",{staticClass:"btn popup-btn",on:{click:function(s){return s.preventDefault(),t.addTask(s)}}},[t._v("Добавить")]):i("button",{staticClass:"btn popup-btn",on:{click:function(s){return s.preventDefault(),t.editTask(s)}}},[t._v("Сохранить изменения")])])]):t._e(),t.deleteTaskPopup?i("div",{staticClass:"overlay"},[i("div",{staticClass:"popup popup-delete"},[i("div",{staticClass:"popup-close",on:{click:function(s){s.preventDefault(),t.deleteTaskPopup=!1}}},[t._v("×")]),i("div",{staticClass:"popup-title"},[t._v(' Вы действительно хотите удалить дело "'+t._s(t.currentTask.name)+'"? ')]),i("div",[i("button",{staticClass:"btn popup-delete__btn",on:{click:function(s){return s.preventDefault(),t.deleteTask()}}},[t._v("Да")]),i("button",{staticClass:"btn popup-delete__btn",on:{click:function(s){s.preventDefault(),t.deleteTaskPopup=!1}}},[t._v("Нет")])])])]):t._e(),t.errorPopup?i("div",{staticClass:"overlay"},[i("div",{staticClass:"popup popup-error"},[i("div",{staticClass:"popup-close",on:{click:function(s){s.preventDefault(),t.errorPopup=!1}}},[t._v("×")]),i("div",{staticClass:"popup-title"},[i("div",{staticClass:"popup-error__cross"},[t._v("×")]),i("div",{staticClass:"popup-error__message"},[t._v(t._s(t.errorMessage))])])])]):t._e(),t.successPopup?i("div",{staticClass:"popup popup-success"},[i("div",{staticClass:"popup-close",on:{click:function(s){s.preventDefault(),t.successPopup=!1}}},[t._v("×")]),i("div",{staticClass:"popup-title"},[i("div",{staticClass:"popup-success__tick"},[i("svg",{staticStyle:{"enable-background":"new 0 0 512 512"},attrs:{version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512","xml:space":"preserve",fill:"#2E7D32"}},[i("path",{attrs:{d:"M504.502,75.496c-9.997-9.998-26.205-9.998-36.204,0L161.594,382.203L43.702,264.311c-9.997-9.998-26.205-9.997-36.204,0 c-9.998,9.997-9.998,26.205,0,36.203l135.994,135.992c9.994,9.997,26.214,9.99,36.204,0L504.502,111.7 C514.5,101.703,514.499,85.494,504.502,75.496z"}})])]),i("div",{staticClass:"popup-success__message"},[t._v(t._s(t.successMessage))])])]):t._e()])}),C=[],E=(e("4e82"),e("0d03"),e("d3b7"),e("25f0"),{props:["list"],data:function(){return{currentTask:null,taskPopup:!1,deleteTaskPopup:!1,addPopupFlag:!0,newTaskName:"",newTaskPriority:!1,taskId:null,errorPopup:!1,errorMessage:null,successPopup:!1,successMessage:null}},methods:{getTime:function(t){var s=new Date(t);return(s.getDate().toString().length>1?s.getDate().toString():"0"+s.getDate().toString())+"."+(s.getMonth()+1).toString()+"."+s.getFullYear().toString()+" "+(s.getHours().toString().length>1?s.getHours().toString():"0"+s.getHours().toString())+":"+(s.getMinutes().toString().length>1?s.getMinutes().toString():"0"+s.getMinutes().toString())},generateCheckboxId:function(t){return"checkbox-"+t},showTaskPopup:function(t,s,e){this.taskId=t,null!=s?(this.addPopupFlag=!1,this.newTaskName=s,this.newTaskPriority=e):(this.addPopupFlag=!0,this.newTaskName="",this.newTaskPriority=!1),this.taskPopup=!0},addTask:function(){var t=this;this.newTaskName?this.newTaskName.length>30?(this.errorMessage='В поле "Название дела" должно быть не более 30 символов',this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3)):this.$store.getters.currentList.tasks.every((function(s){return s.name!=t.newTaskName}))?(this.$store.dispatch("ADD_USER_TASK",{listId:this.list.id,taskName:this.newTaskName,taskPriority:this.newTaskPriority}),this.taskPopup=!1,this.successMessage='Дело "'.concat(this.newTaskName,'" добавлено'),this.newTaskName="",this.successPopup=!0,setTimeout((function(){t.successPopup=!1}),3e3)):(this.errorMessage="Такое дело уже существует",this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3)):(this.errorMessage='Поле "Название дела" должно быть заполнено',this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3))},editTask:function(){var t=this;this.newTaskName?this.newTaskName.length>30?(this.errorMessage='В поле "Название дела" должно быть не более 30 символов',this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3)):this.$store.getters.currentList.tasks.every((function(s){return s.id!=t.taskId&&s.name!=t.newTaskName||s.id==t.taskId}))?(this.$store.dispatch("EDIT_USER_TASK",{listId:this.list.id,taskId:this.taskId,taskName:this.newTaskName,taskPriority:this.newTaskPriority}),this.taskPopup=!1,this.successMessage='Дело "'.concat(this.newTaskName,'" изменено'),this.newTaskName="",this.successPopup=!0,setTimeout((function(){t.successPopup=!1}),3e3)):(this.errorMessage="Такое дело уже существует",this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3)):(this.errorMessage='Поле "Название дела" должно быть заполнено',this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3))},changeTaskDone:function(t,s){for(var e=0;e<this.$store.getters.currentList.tasks.length;e++){var i=this.$store.getters.currentList.tasks[e];if(i.id==t){if(i.done)break;s.target.checked=!0,this.$store.dispatch("CHANGE_TASK_DONE",{listId:this.list.id,taskId:t});break}}},showDeleteTaskPopup:function(t){this.currentTask=t,this.newTaskName=t.name,this.taskId=t.id,this.deleteTaskPopup=!0},deleteTask:function(){var t=this;this.$store.dispatch("DELETE_USER_TASK",{listId:this.list.id,taskId:this.taskId}),this.deleteTaskPopup=!1,this.successMessage='Дело "'.concat(this.newTaskName,'" удалено'),this.newTaskName="",this.successPopup=!0,setTimeout((function(){t.successPopup=!1}),3e3)}},computed:{storeTasks:function(){var t=this.$store.getters.currentList.tasks;return t},sortedTasks:function(){var t=this.storeTasks;return t=t.sort((function(t,s){return s.time-t.time})),t}}}),P=E,b=(e("97b7"),Object(l["a"])(P,T,C,!1,null,"73e3bd34",null)),I=b.exports,L={data:function(){return{status:"process",currentList:null,listPopup:!1,deleteListPopup:!1,addPopupFlag:!0,newListName:"",listId:null,errorPopup:!1,errorMessage:null,successPopup:!1,successMessage:null}},methods:{setActiveCard:function(t,s){var e=document.querySelectorAll(".left-list");e.forEach((function(t){t.classList.remove("left-list_active")})),e[s].classList.add("left-list_active"),this.setCurrentList(t)},setCurrentList:function(t){this.$store.dispatch("SET_CURRENT_LIST",t),this.currentList=this.$store.getters.currentList},showListPopup:function(t,s){this.listId=s,null!=t?(this.addPopupFlag=!1,this.newListName=t):(this.addPopupFlag=!0,this.newListName=""),this.listPopup=!0},addList:function(){var t=this;this.newListName?this.newListName.length>30?(this.errorMessage='В поле "Название списка дел" должно быть не более 30 символов',this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3)):this.$store.getters.getLists.every((function(s){return s.name!=t.newListName}))?(this.$store.dispatch("ADD_USER_LIST",this.newListName),this.listPopup=!1,this.successMessage='Список дел "'.concat(this.newListName,'" добавлен'),this.newListName="",this.successPopup=!0,setTimeout((function(){t.successPopup=!1}),3e3)):(this.errorMessage="Такой список дел уже существует",this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3)):(this.errorMessage='Поле "Название списка дел" должно быть заполнено',this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3))},editList:function(){var t=this;if(this.newListName)if(this.newListName.length>30)this.errorMessage='В поле "Название списка дел" должно быть не более 30 символов',this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3);else if(this.$store.getters.getLists.every((function(s){return s.name!=t.newListName}))){this.$store.dispatch("EDIT_USER_LIST",{listId:this.listId,listName:this.newListName}),this.listPopup=!1,this.successMessage='Список дел "'.concat(this.newListName,'" изменён'),this.newListName=null,this.currentList=null;var s=document.querySelectorAll(".left-list");s.forEach((function(t){t.classList.remove("left-list_active")})),this.successPopup=!0,setTimeout((function(){t.successPopup=!1}),3e3)}else this.errorMessage="Такой список дел уже существует",this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3);else this.errorMessage='Поле "Название списка дел" должно быть заполнено',this.errorPopup=!0,setTimeout((function(){t.errorPopup=!1}),5e3)},showDeleteListPopup:function(t){this.setCurrentList(t),this.listId=t.id,this.deleteListPopup=!0},deleteList:function(){var t=this;this.$store.dispatch("DELETE_USER_LIST",this.listId),this.deleteListPopup=!1,this.successMessage='Список дел "'.concat(this.currentList.name,'" удалён'),this.listId=null,this.currentList=null,this.successPopup=!0,setTimeout((function(){t.successPopup=!1}),3e3)},listClass:function(t){return t.tasks.length?t.tasks.every((function(t){return t.done}))?"left-list left-list_done":"left-list left-list_process":"left-list left-list_empty"}},computed:{filteredLists:function(){var t=this.$store.getters.getLists,s=[];return"process"==this.status?t.forEach((function(t){if(t.tasks.length){for(var e=0;e<t.tasks.length;e++)if(!t.tasks[e].done){s.push(t);break}}else s.push(t)})):"done"==this.status?t.forEach((function(t){if(t.tasks.length){for(var e=!0,i=0;i<t.tasks.length;i++)if(!t.tasks[i].done){e=!1;break}e&&s.push(t)}})):s=t,s}},components:{Tasks:I}},w=L,N=(e("77e4"),Object(l["a"])(w,S,k,!1,null,"94cfed90",null)),R=N.exports,D={components:{Header:d,Login:m,Lists:R},computed:{isUserAuthenticated:function(){return this.$store.getters.isUserAuthenticated},loadingData:function(){return this.$store.getters.getLoading}}},y=D,O=(e("cf25"),Object(l["a"])(y,n,a,!1,null,null,null)),A=O.exports,x=e("2f62"),G={state:{processing:!1,error:null,loading:!1},mutations:{SET_PROCESSING:function(t,s){t.processing=s},SET_ERROR:function(t,s){t.error=s},CLEAR_ERROR:function(t){t.error=null},SET_LOADING:function(t,s){i["a"].set(t,"loading",s)}},getters:{getProcessing:function(t){return t.processing},getError:function(t){return t.error},getLoading:function(t){return t.loading}}},$=e("8aa5"),M=e.n($),U={state:{user:{isAuthenticated:!1,uid:null,login:null}},mutations:{SET_USER:function(t,s){t.user.isAuthenticated=!0,t.user.uid=s.uid,t.user.login=s.email},UNSET_USER:function(t){t.user={isAuthenticated:!1,uid:null,login:null}}},actions:{SIGNIN:function(t,s){var e=t.commit;e("SET_PROCESSING",!0),e("CLEAR_ERROR"),M.a.auth().signInWithEmailAndPassword(s.email,s.password).then((function(){e("SET_PROCESSING",!1)})).catch((function(t){e("SET_PROCESSING",!1),e("SET_ERROR",t.message)}))},SIGNOUT:function(t){var s=t.commit;s("SET_PROCESSING",!0),M.a.auth().signOut(),s("SET_PROCESSING",!1)},STATE_CHANGED:function(t,s){var e=t.commit,i=t.dispatch;e("SET_PROCESSING",!0),s?(e("SET_USER",{uid:s.uid,email:s.email}),i("LOAD_USER_DATA",s.uid)):e("UNSET_USER"),e("SET_PROCESSING",!1)}},getters:{isUserAuthenticated:function(t){return t.user.isAuthenticated},userLogin:function(t){return t.user.login},userId:function(t){return t.user.uid}}},j=(e("fb6a"),{state:{lists:[]},mutations:{SET_LISTS:function(t,s){i["a"].set(t,"lists",s)}},actions:{LOAD_LISTS:function(t,s){var e=t.commit;e("SET_PROCESSING",!0),e("SET_LOADING",!0),s&&i["a"].$db.collection(s).get().then((function(t){var s=[];t.forEach((function(t){var e=t.data(),i={id:t.id,name:e.name,tasks:e.tasks?e.tasks.slice():[]};s.push(i)})),s.sort((function(t,s){var e=t.name.toLowerCase(),i=s.name.toLowerCase();return e<i?-1:e>i?1:0})),e("SET_LISTS",s),e("SET_PROCESSING",!1),e("SET_LOADING",!1)})).catch((function(t){console.log(t),e("SET_PROCESSING",!1),e("SET_LOADING",!1)}))},LOAD_LISTS_PASSIVE:function(t,s){var e=t.commit;e("SET_PROCESSING",!0),s&&i["a"].$db.collection(s).get().then((function(t){var s=[];t.forEach((function(t){var e=t.data(),i={id:t.id,name:e.name,tasks:e.tasks?e.tasks.slice():[]};s.push(i)})),s.sort((function(t,s){var e=t.name.toLowerCase(),i=s.name.toLowerCase();return e<i?-1:e>i?1:0})),e("SET_LISTS",s),e("SET_PROCESSING",!1)})).catch((function(t){console.log(t),e("SET_PROCESSING",!1)}))}},getters:{getLists:function(t){return t.lists}}}),F={state:{currentList:{}},mutations:{SET_CURRENT_LIST:function(t,s){i["a"].set(t.currentList,"id",s.id),i["a"].set(t.currentList,"name",s.name),i["a"].set(t.currentList,"tasks",s.tasks)}},actions:{LOAD_USER_DATA:function(t,s){var e=t.commit,i=t.dispatch;e("SET_PROCESSING",!0),i("LOAD_LISTS",s),e("SET_PROCESSING",!1)},ADD_USER_LIST:function(t,s){var e=t.commit,n=t.getters;e("SET_PROCESSING",!0);var a=i["a"].$db.collection(n.userId),o={name:s,tasks:[]};a.add(o).then((function(){a.get().then((function(t){var s=[];t.forEach((function(t){var e=t.data(),i={id:t.id,name:e.name,tasks:e.tasks?e.tasks.slice():[]};s.push(i)})),e("SET_LISTS",s)})).catch((function(t){return console.log(t)})),e("SET_PROCESSING",!1)})).catch((function(t){console.log(t),e("SET_PROCESSING",!1)}))},EDIT_USER_LIST:function(t,s){var e=t.commit,n=t.getters;e("SET_PROCESSING",!0);var a=i["a"].$db.collection(n.userId),o=i["a"].$db.collection(n.userId).doc(s.listId);o.update({name:s.listName}).then((function(){a.get().then((function(t){var s=[];t.forEach((function(t){var e=t.data(),i={id:t.id,name:e.name,tasks:e.tasks?e.tasks.slice():[]};s.push(i)})),e("SET_LISTS",s)})).catch((function(t){return console.log(t)})),e("SET_PROCESSING",!1)})).catch((function(t){console.log(t),e("SET_PROCESSING",!1)}))},DELETE_USER_LIST:function(t,s){var e=t.commit,n=t.getters;e("SET_PROCESSING",!0);var a=i["a"].$db.collection(n.userId);i["a"].$db.collection(n.userId).doc(s).delete().then((function(){a.get().then((function(t){var s=[];t.forEach((function(t){var e=t.data(),i={id:t.id,name:e.name,tasks:e.tasks?e.tasks.slice():[]};s.push(i)})),e("SET_LISTS",s)})).catch((function(t){return console.log(t)})),e("SET_PROCESSING",!1)})).catch((function(t){console.log(t),e("SET_PROCESSING",!1)}))},SET_CURRENT_LIST:function(t,s){var e=t.commit;e("SET_PROCESSING",!0),e("SET_CURRENT_LIST",s),e("SET_PROCESSING",!1)},ADD_USER_TASK:function(t,s){var e=t.commit,n=t.dispatch,a=t.getters;e("SET_PROCESSING",!0);var o=i["a"].$db.collection(a.userId).doc(s.listId),r={id:Date.now(),name:s.taskName,priority:s.taskPriority,done:!1,time:Date.now()},c={};o.get().then((function(t){t.exists?(c=t.data(),c.id=s.listId,c.tasks.push(r),o.update({tasks:c.tasks}).then((function(){n("LOAD_LISTS_PASSIVE",a.userId),e("SET_CURRENT_LIST",c),e("SET_PROCESSING",!1)})).catch((function(t){console.log(t),e("SET_PROCESSING",!1)}))):console.log("Can't get tasks from DB")})).catch((function(t){return console.log(t)}))},EDIT_USER_TASK:function(t,s){var e=t.commit,n=t.dispatch,a=t.getters;e("SET_PROCESSING",!0);var o=i["a"].$db.collection(a.userId).doc(s.listId),r={};o.get().then((function(t){t.exists?(r=t.data(),r.id=s.listId,r.tasks.forEach((function(t){t.id==s.taskId&&(t.name=s.taskName,t.priority=s.taskPriority)})),o.update({tasks:r.tasks}).then((function(){n("LOAD_LISTS_PASSIVE",a.userId),e("SET_CURRENT_LIST",r),e("SET_PROCESSING",!1)})).catch((function(t){console.log(t),e("SET_PROCESSING",!1)}))):(console.log("Can't get tasks from DB"),e("SET_PROCESSING",!1))})).catch((function(t){console.log(t),e("SET_PROCESSING",!1)}))},CHANGE_TASK_DONE:function(t,s){var e=t.commit,n=t.dispatch,a=t.getters;e("SET_PROCESSING",!0);var o=i["a"].$db.collection(a.userId).doc(s.listId),r={};o.get().then((function(t){t.exists?(r=t.data(),r.id=s.listId,r.tasks.forEach((function(t){t.id==s.taskId&&(t.done=!0)})),o.update({tasks:r.tasks}).then((function(){n("LOAD_LISTS_PASSIVE",a.userId),e("SET_CURRENT_LIST",r),e("SET_PROCESSING",!1)})).catch((function(t){console.log(t),e("SET_PROCESSING",!1)}))):(console.log("Can't get tasks from DB"),e("SET_PROCESSING",!1))})).catch((function(t){console.log(t),e("SET_PROCESSING",!1)}))},DELETE_USER_TASK:function(t,s){var e=t.commit,n=t.dispatch,a=t.getters;e("SET_PROCESSING",!0);var o=i["a"].$db.collection(a.userId).doc(s.listId),r={};o.get().then((function(t){if(t.exists){r=t.data(),r.id=s.listId;for(var i=0;i<r.tasks.length;i++)if(r.tasks[i].id==s.taskId){for(var c=i;c<r.tasks.length-1;c++)r.tasks[c]=r.tasks[c+1];r.tasks.length=r.tasks.length-1;break}o.update({tasks:r.tasks}).then((function(){n("LOAD_LISTS_PASSIVE",a.userId),e("SET_CURRENT_LIST",r),e("SET_PROCESSING",!1)})).catch((function(t){console.log(t),e("SET_PROCESSING",!1)}))}else console.log("Can't get tasks from DB"),e("SET_PROCESSING",!1)})).catch((function(t){console.log(t),e("SET_PROCESSING",!1)}))}},getters:{currentList:function(t){return t.currentList}}};i["a"].use(x["a"]);var B=new x["a"].Store({modules:{generalModule:G,userModule:U,listsModule:j,userDataModule:F}}),H=(e("e71f"),{apiKey:"AIzaSyCeok_7Quq2ED97U-VCHwLrDPdqshzMmhQ",authDomain:"smart-world-test-3.firebaseapp.com",databaseURL:"https://smart-world-test-3.firebaseio.com",projectId:"smart-world-test-3",storageBucket:"smart-world-test-3.appspot.com",messagingSenderId:"200559440742",appId:"1:200559440742:web:9b2c3c857cd619cd3a4ea7"});i["a"].config.productionTip=!1;var K=M.a.initializeApp(H),q=K.firestore();i["a"].$db=q,new i["a"]({store:B,render:function(t){return t(A)},created:function(){var t=this;M.a.auth().onAuthStateChanged((function(s){t.$store.dispatch("STATE_CHANGED",s)})),this.$store.dispatch("LOAD_LISTS")}}).$mount("#app")},"6a35":function(t,s,e){},"77e4":function(t,s,e){"use strict";var i=e("ffad"),n=e.n(i);n.a},"97b7":function(t,s,e){"use strict";var i=e("2b22"),n=e.n(i);n.a},bb60:function(t,s,e){"use strict";var i=e("f14f"),n=e.n(i);n.a},c4cc:function(t,s,e){t.exports=e.p+"img/pen.d60cd0f6.svg"},cf25:function(t,s,e){"use strict";var i=e("fea6"),n=e.n(i);n.a},e1dc:function(t,s,e){t.exports=e.p+"img/bin.d78ef3e4.svg"},f14f:function(t,s,e){},fb26:function(t,s,e){"use strict";var i=e("6a35"),n=e.n(i);n.a},fea6:function(t,s,e){},ffad:function(t,s,e){}});
//# sourceMappingURL=app.82823de3.js.map